# Jjy_Realtime_App

# 要件定義書

## 1. 概要

JJYフォーマットのリアルタイム時刻信号を生成し、音声で模擬的に再生することで、電波時計の時刻合わせを支援するWebアプリケーションを作成する。

## 2. 目的

* 電波時計が電波を受信できない環境において、スマートフォンやPCのスピーカー経由で時計の時刻合わせを可能にする。

## 3. システム機能要件

### 3.1 時刻信号の生成

* 日本標準時（JST）を基準として、現在日時からJJYフォーマットに準拠した60秒周期のビット列を生成する。
* ビット種別：「0」、「1」、「マーカ（M）」を正確に区別する。

### 3.2 音声信号の再生

* 各ビットに応じて以下のような音声を出力する。

  * 「0」: 0.2秒間の短音
  * 「1」: 0.5秒間の長音
  * 「M（マーカ）」: 0.8秒間の特別なマーカ音
* 信号は1秒ごとに規則正しく再生され、60秒周期を守る。

### 3.3 ユーザーインターフェース

* 現在の日時および生成されたJJYビット列を視覚的に表示する。
* 信号再生の開始と停止を行うための明確な操作ボタンを提供する。

## 4. 非機能要件

### 4.1 パフォーマンス

* 時刻情報はリアルタイム（±1秒以内）で提供されること。
* 信号再生中に途切れが発生しないよう安定した処理を行うこと。

### 4.2 使用環境

* Streamlitを使用したWebベースのアプリケーションとして提供。
* PCおよびスマートフォンのブラウザから利用可能であること。
* 音声再生機能のため、スピーカーが必要。

## 5. 使用技術

* Python
* Streamlit
* NumPy
* sounddevice

## 6. 制約事項

* 電波時計側の受信感度に依存するため、すべての時計で動作を保証するものではない。
* 著作権および電波法に抵触しない範囲での使用を前提とする。
* ローカル環境でのみ駆動する
  手順
	1.	PCで以下を実行： 
 streamlit run jjy_realtime_app.py --server.address 0.0.0.0
	2.	表示されたURL（例：http://192.168.1.10:8501）をスマホのブラウザで開く
	3.	「リアルタイムJJY信号を再生開始」ボタンを押す
	4.	音はPCのスピーカーから再生されるため、スマホは「リモコン」的な役割になります

## 7. 運用方法

* ユーザーがアプリケーションをブラウザ上で起動し、「再生開始」ボタンを押すことでリアルタイムなJJY信号の音声再生が開始される。
* 再生を停止する場合は、ブラウザの操作またはアプリケーションを終了することで停止される。

## 8. 将来的な改善事項

* 特定の日時を指定した信号生成機能の追加。
* WAVファイルとしてのエクスポート機能の追加。
* 信号再生精度および対応機種拡張に関する継続的な改善。
